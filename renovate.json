{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "packageRules": [
    {
      "matchDatasources": [
        "docker"
      ],
      "matchPackageNames": [
        "ghcr.io/umami-software/umami"
      ],
      "allowedVersions": "/^postgres-/"
    },
    {
      "matchDatasources": [
        "docker"
      ],
      "matchPackageNames": [
        "ghcr.io/berriai/litellm"
      ],
      "allowedVersions": "/^main-.*-stable$/"
    }
  ],
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": ["(^|/)kustomization\\.ya?ml$"],
      "matchStrings": [
        "image:\\s*(?<depName>ghcr.io/umami-software/umami):(?<currentValue>.*?)(?:@(?<currentDigest>sha256:[a-f0-9]+))?"
      ],
      "datasourceTemplate": "docker",
      "extractVersionTemplate": "^postgres-(?<version>\\d+\\.\\d+\\.\\d+)$"
    },
    {
      "customType": "regex",
      "fileMatch": ["(^|/)kustomization\\.ya?ml$"],
      "matchStrings": [
        "image:\\s*(?<depName>ghcr.io/berriai/litellm):(?<currentValue>.*?)(?:@(?<currentDigest>sha256:[a-f0-9]+))?"
      ],
      "datasourceTemplate": "docker",
      "extractVersionTemplate": "^main-v(?<version>\\d+\\.\\d+\\.\\d+)-stable$"
    }
  ]
}
